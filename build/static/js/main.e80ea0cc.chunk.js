(this["webpackJsonpapp-todo"]=this["webpackJsonpapp-todo"]||[]).push([[0],{32:function(t,e,n){t.exports=n(58)},37:function(t,e,n){},52:function(t,e,n){},53:function(t,e,n){},54:function(t,e,n){},55:function(t,e,n){},56:function(t,e,n){},57:function(t,e,n){},58:function(t,e,n){"use strict";n.r(e);var a=n(1),o=n.n(a),c=n(24),i=n.n(c),r=n(15),l=(n(37),n(3)),u=n(10),s=n(22),d=n(16),m=n(25),f=n.n(m);f.a.initializeApp({apiKey:"AIzaSyAlCUEfDYTdnaYoOtIQ-o8cU0bSigjWk1k",authDomain:"react-todo-4649a.firebaseapp.com",databaseURL:"https://react-todo-4649a.firebaseio.com",projectId:"react-todo-4649a",storageBucket:"react-todo-4649a.appspot.com",messagingSenderId:"930484674768",appId:"1:930484674768:web:1540fda55156b6052c3ed5"});var p=f.a.firestore();function E(){return p.collection("lists").get().then((function(t){return t.docs.map((function(t){return Object(u.a)({id:t.id},t.data())}))})).catch((function(t){console.log("Error getting documents: ",t)}))}function b(){var t=Object(a.useState)([]),e=Object(d.a)(t,2),n=e[0],o=e[1],c=Object(a.useState)([]),i=Object(d.a)(c,2),r=i[0],l=i[1];return Object(a.useEffect)((function(){E().then(l)}),[]),{data:{lists:r,todos:n},actions:{getLists:function(){return E().then(l)},getListTodos:function(t){return function(t){return p.collection("todos").where("listId","==",t).get().then((function(t){return t.docs.map((function(t){return Object(u.a)({id:t.id},t.data())}))})).catch((function(t){console.log("Error getting documents: ",t)}))}(t).then(o)},createTodo:function(t){return function(t){return p.collection("todos").add(Object(u.a)(Object(u.a)({},t),{},{completed:!1})).then((function(t){return t.get()})).then((function(t){return Object(u.a)({id:t.id},t.data())}))}(t).then((function(t){return o([].concat(Object(s.a)(n),[t]))}))},updateTodo:function(t,e){return function(t,e){return p.collection("todos").doc(t).update(e)}(t,e).then((function(e){o(Object(s.a)(n.map((function(n){return n.id!==t?Object(u.a)(Object(u.a)({},n),e):n}))))}))},deleteTodo:function(t){return function(t){return p.collection("todos").doc(t).delete().then((function(){return t}))}(t).then((function(t){o(Object(s.a)(n.filter((function(e){return e.id!==t}))))}))}}}}var h=n(2);function I(t){var e=t.lists;return o.a.createElement(h.Drawer,{id:"app-drawer"},o.a.createElement(h.DrawerHeader,{title:"React Todo"}),o.a.createElement(h.DrawerContent,null,o.a.createElement(h.ListGroup,null,o.a.createElement(h.List,null,[{title:"\u0417\u0430\u0434\u0430\u0447\u0438",icon:"home",to:"/"},{title:"\u0412\u0430\u0436\u043d\u043e",icon:"star",to:"/important"},{title:"\u0417\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435",icon:"event",to:"/planned"}].map((function(t){return o.a.createElement(h.ListItem,{component:r.b,to:t.to,key:t.icon},o.a.createElement(h.ListItemGraphic,null,o.a.createElement(h.Icon,null,t.icon)),o.a.createElement(h.ListItemText,null,t.title))}))),o.a.createElement(h.ListDivider,{element:"hr"}),o.a.createElement(h.List,null,e.map((function(t){return o.a.createElement(h.ListItem,{component:r.b,to:t.id,key:t.id},o.a.createElement(h.ListItemGraphic,null,o.a.createElement(h.Icon,null,"list")),o.a.createElement(h.ListItemText,null,t.title))}))))))}n(52);function j(t){var e=Object.assign({},t);return o.a.createElement("main",Object.assign({id:"app-content"},e))}n(53);function g(t){var e=t.todo,n=t.onUpdate,a=t.onDelete;return o.a.createElement(h.ListItem,{className:"todo-list-item"},o.a.createElement(h.ListItemGraphic,null,o.a.createElement(h.Checkbox,{checked:e.completed,onChange:function(t,a,o){n(e.id,Object(u.a)(Object(u.a)({},e),{},{completed:a}))}})),o.a.createElement(h.ListItemText,null,e.title),o.a.createElement(h.ListItemMeta,null,o.a.createElement(h.IconButton,{onClick:function(){return a(e.id)}},o.a.createElement(h.Icon,null,"delete"))))}n(54);function O(t){var e=t.list,n=t.todos,a=t.onUpdate,c=t.onDelete;return o.a.createElement("div",{className:"todo-list"},o.a.createElement(h.Typography,{className:"todo-list__title",variant:"headline4"},e.title),o.a.createElement(h.List,{className:"todo-list"},n.map((function(t){return o.a.createElement(g,{key:t.id,todo:t,onUpdate:a,onDelete:c})}))))}n(55);function v(t){var e=t.onSubmit,n=Object(a.useState)(""),c=Object(d.a)(n,2),i=c[0],r=c[1],l=Object(a.useState)(""),u=Object(d.a)(l,2),s=u[0],m=u[1],f=o.a.createRef();return o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e(i),r("")},className:"todo-form"},o.a.createElement(h.List,null,o.a.createElement(h.ListItem,{className:s},o.a.createElement(h.TextField,{ref:f,label:"\u0427\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c...",value:i,onChange:function(t){return r(t.target.value)},onFocus:function(){m(""===s?"mdc-list-item--focus":"")},onBlur:function(){m(""===s?"mdc-list-item--focus":"")},type:"text",fullWidth:!0}))))}n(56);function L(t){var e=t.match,n=b(),c=n.data,i=c.lists,r=c.todos,l=n.actions;Object(a.useEffect)((function(){l.getListTodos(e.params.listId)}),[l,e.params.listId]);var u=i.find((function(t){return t.id===e.params.listId}));return"object"!==typeof u?"":o.a.createElement("div",{id:"todo-list-page",className:"page"},o.a.createElement(O,{list:u,todos:r,onUpdate:function(t,e){l.updateTodo(t,e)},onDelete:function(t){l.deleteTodo(t)}}),o.a.createElement(v,{onSubmit:function(t){l.createTodo({title:t,listId:u.id})}}))}n(57);function T(){var t=b().data.lists;return o.a.createElement("div",{className:"app"},o.a.createElement(I,{lists:t}),o.a.createElement(j,null,o.a.createElement(l.d,null,o.a.createElement(l.b,{path:"/todos/:listId",component:L}),o.a.createElement(l.b,{path:"/:listId",component:L}),o.a.createElement(l.a,{from:"*",to:"/"}))))}i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(r.a,null,o.a.createElement(T,null))),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.e80ea0cc.chunk.js.map